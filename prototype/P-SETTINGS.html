<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>字幕智析 - 个人设置</title>
    <script src="https://unpkg.byted-static.com/coze/space_ppt_lib/1.0.3-alpha.12/lib/tailwindcss.js"></script>
    <script src="https://unpkg.byted-static.com/fortawesome/fontawesome-free/6.7.2/js/all.min.js" data-auto-replace-svg="nest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        tertiary: '#06b6d4',
                        success: '#10b981',
                        danger: '#ef4444',
                        warning: '#f59e0b',
                        info: '#3b82f6',
                        'glass-bg': 'rgba(255, 255, 255, 0.1)',
                        'glass-border': 'rgba(255, 255, 255, 0.2)',
                        'dark-bg': '#0f0f23',
                        'dark-card': '#1a1a2e',
                        'dark-surface': '#16213e'
                    },
                    backdropBlur: {
                        'xs': '2px',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .glass-nav {
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glass-sidebar {
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(15px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glass-button {
            background: rgba(99, 102, 241, 0.2);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(99, 102, 241, 0.3);
            transition: all 0.3s ease;
        }
        
        .glass-button:hover {
            background: rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        
        .glass-input {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-input:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(99, 102, 241, 0.5);
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
        }
        
        .sidebar-item {
            transition: all 0.3s ease;
        }
        
        .sidebar-item:hover {
            background: rgba(99, 102, 241, 0.1);
            transform: translateX(5px);
        }
        
        .sidebar-item.active {
            background: rgba(99, 102, 241, 0.2);
            border-right: 3px solid #6366f1;
        }
        
        .settings-menu-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .settings-menu-item:hover {
            background: rgba(99, 102, 241, 0.1);
        }
        
        .settings-menu-item.active {
            background: rgba(99, 102, 241, 0.2);
            border-left: 3px solid #6366f1;
        }
        
        .settings-content {
            display: none;
        }
        
        .settings-content.active {
            display: block;
        }
        
        .success-message {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #10b981;
        }
        
        .avatar-upload {
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .avatar-upload:hover {
            transform: scale(1.05);
        }
        
        .avatar-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 50%;
        }
        
        .avatar-upload:hover .avatar-overlay {
            opacity: 1;
        }
        
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .toggle-switch.active {
            background: rgba(99, 102, 241, 0.6);
        }
        
        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }
        
        .toggle-switch.active .toggle-slider {
            transform: translateX(24px);
        }
    </style>
</head>
<body class="text-white font-sans">
    <!-- 顶部导航栏 -->
    <nav id="top-nav" class="glass-nav fixed top-0 left-0 right-0 h-16 flex items-center justify-between px-6 z-50">
        <div id="nav-left" class="flex items-center space-x-4">
            <div id="logo" class="flex items-center space-x-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center">
                    <i class="fas fa-language text-white text-lg"></i>
                </div>
                <span class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">字幕智析</span>
            </div>
        </div>
        
        <div id="nav-center" class="flex-1 max-w-md mx-8">
            <div class="relative">
                <input 
                    type="text" 
                    id="global-search" 
                    placeholder="搜索学习内容..." 
                    class="w-full px-4 py-2 pl-10 rounded-xl glass-input text-white placeholder-gray-300 focus:outline-none"
                >
                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-300"></i>
            </div>
        </div>
        
        <div id="nav-right" class="flex items-center space-x-4">
            <button id="notification-btn" class="relative p-2 rounded-lg glass-button">
                <i class="fas fa-bell text-white"></i>
                <span class="absolute -top-1 -right-1 w-3 h-3 bg-danger rounded-full"></span>
            </button>
            <div id="user-menu" class="relative">
                <button id="user-avatar" class="flex items-center space-x-2 p-2 rounded-lg glass-button">
                    <img src="https://s.coze.cn/image/H9LdHjh9CxQ/" 
                         alt="用户头像" 
                         class="w-8 h-8 rounded-full"
                         data-category="人物">
                    <span class="text-white">学习者</span>
                    <i class="fas fa-chevron-down text-gray-300 text-sm"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- 左侧菜单 -->
    <aside id="sidebar" class="glass-sidebar fixed left-0 top-16 bottom-0 w-64 z-40 transition-all duration-300">
        <div id="sidebar-content" class="p-4">
            <nav id="sidebar-nav" class="space-y-2">
                <a href="P-HOME.html" id="nav-home" class="sidebar-item flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-300 hover:text-white">
                    <i class="fas fa-home text-lg"></i>
                    <span class="font-medium">首页</span>
                </a>
                <a href="P-SUBTITLE_PROCESS.html" id="nav-subtitle" class="sidebar-item flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-300 hover:text-white">
                    <i class="fas fa-file-alt text-lg"></i>
                    <span class="font-medium">字幕处理</span>
                </a>
                <a href="P-LEARNING_RECORD.html" id="nav-record" class="sidebar-item flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-300 hover:text-white">
                    <i class="fas fa-chart-line text-lg"></i>
                    <span class="font-medium">学习记录</span>
                </a>
                <a href="P-NOTE_MANAGE.html" id="nav-notes" class="sidebar-item flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-300 hover:text-white">
                    <i class="fas fa-sticky-note text-lg"></i>
                    <span class="font-medium">笔记管理</span>
                </a>
                <a href="#" id="nav-settings" class="sidebar-item active flex items-center space-x-3 px-4 py-3 rounded-xl text-white">
                    <i class="fas fa-cog text-lg"></i>
                    <span class="font-medium">个人设置</span>
                </a>
            </nav>
        </div>
    </aside>

    <!-- 主内容区 -->
    <main id="main-content" class="ml-64 mt-16 p-6 min-h-screen">
        <!-- 页面头部 -->
        <header id="page-header" class="mb-8">
            <div id="breadcrumb" class="text-sm text-gray-400 mb-2">
                <span>首页</span>
                <span class="mx-2">></span>
                <span>个人设置</span>
            </div>
            <h1 id="page-title" class="text-3xl font-bold text-white mb-2">个人设置</h1>
            <p id="page-subtitle" class="text-gray-300">管理您的账户信息和个性化偏好设置</p>
        </header>

        <div class="flex gap-6">
            <!-- 设置菜单 -->
            <aside id="settings-menu" class="w-64">
                <div class="glass-card rounded-xl p-4">
                    <nav class="space-y-1">
                        <div id="menu-profile" class="settings-menu-item active px-4 py-3 rounded-lg text-white">
                            <i class="fas fa-user mr-3"></i>
                            <span>基本资料</span>
                        </div>
                        <div id="menu-security" class="settings-menu-item px-4 py-3 rounded-lg text-gray-300 hover:text-white">
                            <i class="fas fa-shield-alt mr-3"></i>
                            <span>账号安全</span>
                        </div>
                        <div id="menu-notifications" class="settings-menu-item px-4 py-3 rounded-lg text-gray-300 hover:text-white">
                            <i class="fas fa-bell mr-3"></i>
                            <span>通知偏好</span>
                        </div>
                        <div id="menu-goals" class="settings-menu-item px-4 py-3 rounded-lg text-gray-300 hover:text-white">
                            <i class="fas fa-target mr-3"></i>
                            <span>学习目标</span>
                        </div>
                        <div id="menu-aiapi" class="settings-menu-item px-4 py-3 rounded-lg text-gray-300 hover:text-white">
                            <i class="fas fa-robot mr-3"></i>
                            <span>AI API配置</span>
                        </div>
                    </nav>
                </div>
            </aside>

            <!-- 设置内容 -->
            <div id="settings-content-area" class="flex-1">
                <!-- 基本资料 -->
                <div id="content-profile" class="settings-content active">
                    <div class="glass-card rounded-xl p-6">
                        <h2 class="text-xl font-semibold text-white mb-6">基本资料</h2>
                        
                        <div class="space-y-6">
                            <!-- 头像上传 -->
                            <div class="flex items-center space-x-6">
                                <div class="avatar-upload">
                                    <img id="user-avatar-img" 
                                         src="https://s.coze.cn/image/OuqV9m6a8Ck/" 
                                         alt="用户头像" 
                                         class="w-20 h-20 rounded-full object-cover"
                                         data-category="人物">
                                    <div class="avatar-overlay">
                                        <i class="fas fa-camera text-white text-lg"></i>
                                    </div>
                                    <input type="file" id="avatar-input" accept="image/*" class="hidden">
                                </div>
                                <div>
                                    <h3 class="text-lg font-medium text-white">更换头像</h3>
                                    <p class="text-sm text-gray-400">支持 JPG、PNG 格式，文件大小不超过 2MB</p>
                                </div>
                            </div>

                            <!-- 用户名 -->
                            <div>
                                <label for="username" class="block text-sm font-medium text-gray-300 mb-2">用户名</label>
                                <input type="text" 
                                       id="username" 
                                       value="学习者" 
                                       class="w-full px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                       placeholder="请输入用户名">
                            </div>

                            <!-- 邮箱 -->
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-300 mb-2">邮箱地址</label>
                                <input type="email" 
                                       id="email" 
                                       value="user@example.com" 
                                       class="w-full px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                       placeholder="请输入邮箱地址">
                            </div>

                            <!-- 个人简介 -->
                            <div>
                                <label for="bio" class="block text-sm font-medium text-gray-300 mb-2">个人简介</label>
                                <textarea id="bio" 
                                          rows="4" 
                                          class="w-full px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none resize-none"
                                          placeholder="简单介绍一下自己...">热爱英语学习的学习者，希望通过字幕智析提升英语水平。</textarea>
                            </div>

                            <!-- 保存按钮 -->
                            <div class="flex space-x-4 pt-4">
                                <button id="save-profile" class="px-6 py-3 rounded-xl glass-button text-white font-medium">
                                    <i class="fas fa-save mr-2"></i>
                                    保存更改
                                </button>
                                <button id="cancel-profile" class="px-6 py-3 rounded-xl border border-gray-600 text-gray-300 hover:bg-gray-600 hover:bg-opacity-20 transition-colors">
                                    取消
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 账号安全 -->
                <div id="content-security" class="settings-content">
                    <div class="glass-card rounded-xl p-6">
                        <h2 class="text-xl font-semibold text-white mb-6">账号安全</h2>
                        
                        <div class="space-y-6">
                            <!-- 修改密码 -->
                            <div>
                                <h3 class="text-lg font-medium text-white mb-4">修改密码</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label for="current-password" class="block text-sm font-medium text-gray-300 mb-2">当前密码</label>
                                        <input type="password" 
                                               id="current-password" 
                                               class="w-full px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                               placeholder="请输入当前密码">
                                    </div>
                                    <div>
                                        <label for="new-password" class="block text-sm font-medium text-gray-300 mb-2">新密码</label>
                                        <input type="password" 
                                               id="new-password" 
                                               class="w-full px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                               placeholder="请输入新密码">
                                    </div>
                                    <div>
                                        <label for="confirm-password" class="block text-sm font-medium text-gray-300 mb-2">确认新密码</label>
                                        <input type="password" 
                                               id="confirm-password" 
                                               class="w-full px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                               placeholder="请再次输入新密码">
                                    </div>
                                </div>
                            </div>

                            <!-- 绑定手机 -->
                            <div class="pt-6 border-t border-gray-700">
                                <h3 class="text-lg font-medium text-white mb-4">绑定手机</h3>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-gray-300">138****8888</p>
                                        <p class="text-sm text-gray-400">已绑定</p>
                                    </div>
                                    <button id="change-phone" class="px-4 py-2 rounded-lg border border-gray-600 text-gray-300 hover:bg-gray-600 hover:bg-opacity-20 transition-colors">
                                        更换
                                    </button>
                                </div>
                            </div>

                            <!-- 保存按钮 -->
                            <div class="flex space-x-4 pt-6">
                                <button id="save-security" class="px-6 py-3 rounded-xl glass-button text-white font-medium">
                                    <i class="fas fa-save mr-2"></i>
                                    保存更改
                                </button>
                                <button id="cancel-security" class="px-6 py-3 rounded-xl border border-gray-600 text-gray-300 hover:bg-gray-600 hover:bg-opacity-20 transition-colors">
                                    取消
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 通知偏好 -->
                <div id="content-notifications" class="settings-content">
                    <div class="glass-card rounded-xl p-6">
                        <h2 class="text-xl font-semibold text-white mb-6">通知偏好</h2>
                        
                        <div class="space-y-6">
                            <!-- 学习提醒 -->
                            <div class="flex items-center justify-between p-4 rounded-lg bg-gray-800 bg-opacity-50">
                                <div>
                                    <h3 class="text-lg font-medium text-white">学习提醒</h3>
                                    <p class="text-sm text-gray-400">每日学习时间提醒</p>
                                </div>
                                <div id="toggle-study-reminder" class="toggle-switch active">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>

                            <!-- 练习提醒 -->
                            <div class="flex items-center justify-between p-4 rounded-lg bg-gray-800 bg-opacity-50">
                                <div>
                                    <h3 class="text-lg font-medium text-white">练习提醒</h3>
                                    <p class="text-sm text-gray-400">新的练习可用时通知</p>
                                </div>
                                <div id="toggle-practice-reminder" class="toggle-switch active">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>

                            <!-- 系统通知 -->
                            <div class="flex items-center justify-between p-4 rounded-lg bg-gray-800 bg-opacity-50">
                                <div>
                                    <h3 class="text-lg font-medium text-white">系统通知</h3>
                                    <p class="text-sm text-gray-400">系统更新和功能介绍</p>
                                </div>
                                <div id="toggle-system-notification" class="toggle-switch">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>

                            <!-- 邮件通知 -->
                            <div class="flex items-center justify-between p-4 rounded-lg bg-gray-800 bg-opacity-50">
                                <div>
                                    <h3 class="text-lg font-medium text-white">邮件通知</h3>
                                    <p class="text-sm text-gray-400">重要信息通过邮件发送</p>
                                </div>
                                <div id="toggle-email-notification" class="toggle-switch active">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>

                            <!-- 保存按钮 -->
                            <div class="flex space-x-4 pt-6">
                                <button id="save-notifications" class="px-6 py-3 rounded-xl glass-button text-white font-medium">
                                    <i class="fas fa-save mr-2"></i>
                                    保存更改
                                </button>
                                <button id="cancel-notifications" class="px-6 py-3 rounded-xl border border-gray-600 text-gray-300 hover:bg-gray-600 hover:bg-opacity-20 transition-colors">
                                    取消
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 学习目标 -->
                <div id="content-goals" class="settings-content">
                    <div class="glass-card rounded-xl p-6">
                        <h2 class="text-xl font-semibold text-white mb-6">学习目标</h2>
                        
                        <div class="space-y-6">
                            <!-- 每日学习时长 -->
                            <div>
                                <label for="daily-study-time" class="block text-sm font-medium text-gray-300 mb-2">每日学习时长</label>
                                <div class="flex items-center space-x-4">
                                    <input type="number" 
                                           id="daily-study-time" 
                                           value="30" 
                                           min="10" 
                                           max="180" 
                                           class="flex-1 px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                           placeholder="30">
                                    <span class="text-gray-400">分钟</span>
                                </div>
                            </div>

                            <!-- 每周学习天数 -->
                            <div>
                                <label for="weekly-study-days" class="block text-sm font-medium text-gray-300 mb-2">每周学习天数</label>
                                <div class="flex items-center space-x-4">
                                    <input type="number" 
                                           id="weekly-study-days" 
                                           value="5" 
                                           min="1" 
                                           max="7" 
                                           class="flex-1 px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                           placeholder="5">
                                    <span class="text-gray-400">天</span>
                                </div>
                            </div>

                            <!-- 目标考试 -->
                            <div>
                                <label for="target-exam" class="block text-sm font-medium text-gray-300 mb-2">目标考试</label>
                                <select id="target-exam" class="w-full px-4 py-3 rounded-xl glass-input text-white focus:outline-none">
                                    <option value="cet4">大学英语四级 (CET-4)</option>
                                    <option value="cet6" selected>大学英语六级 (CET-6)</option>
                                    <option value="ielts">雅思 (IELTS)</option>
                                    <option value="toefl">托福 (TOEFL)</option>
                                    <option value="postgraduate">考研英语</option>
                                    <option value="none">无特定目标</option>
                                </select>
                            </div>

                            <!-- 词汇量目标 -->
                            <div>
                                <label for="vocabulary-goal" class="block text-sm font-medium text-gray-300 mb-2">词汇量目标</label>
                                <div class="flex items-center space-x-4">
                                    <input type="number" 
                                           id="vocabulary-goal" 
                                           value="6000" 
                                           min="1000" 
                                           max="20000" 
                                           class="flex-1 px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                           placeholder="6000">
                                    <span class="text-gray-400">个单词</span>
                                </div>
                            </div>

                            <!-- 保存按钮 -->
                            <div class="flex space-x-4 pt-6">
                                <button id="save-goals" class="px-6 py-3 rounded-xl glass-button text-white font-medium">
                                    <i class="fas fa-save mr-2"></i>
                                    保存更改
                                </button>
                                <button id="cancel-goals" class="px-6 py-3 rounded-xl border border-gray-600 text-gray-300 hover:bg-gray-600 hover:bg-opacity-20 transition-colors">
                                    取消
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI API配置 -->
                <div id="content-aiapi" class="settings-content">
                    <div class="glass-card rounded-xl p-6">
                        <h2 class="text-xl font-semibold text-white mb-6">AI API配置</h2>
                        
                        <div class="space-y-6">
                            <!-- 服务提供商 -->
                            <div>
                                <label for="ai-provider" class="block text-sm font-medium text-gray-300 mb-2">AI服务提供商</label>
                                <select id="ai-provider" class="w-full px-4 py-3 rounded-xl glass-input text-white focus:outline-none">
                                    <option value="openai">OpenAI</option>
                                    <option value="azure">Microsoft Azure</option>
                                    <option value="anthropic">Anthropic</option>
                                    <option value="google">Google Gemini</option>
                                </select>
                            </div>

                            <!-- API密钥 -->
                            <div>
                                <label for="api-key" class="block text-sm font-medium text-gray-300 mb-2">API密钥</label>
                                <div class="relative">
                                    <input type="password" 
                                           id="api-key" 
                                           value="sk-..." 
                                           class="w-full px-4 py-3 pr-12 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                           placeholder="请输入API密钥">
                                    <button id="toggle-api-key" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- API端点 -->
                            <div>
                                <label for="api-endpoint" class="block text-sm font-medium text-gray-300 mb-2">API端点</label>
                                <input type="url" 
                                       id="api-endpoint" 
                                       value="https://api.openai.com/v1/chat/completions" 
                                       class="w-full px-4 py-3 rounded-xl glass-input text-white placeholder-gray-400 focus:outline-none"
                                       placeholder="请输入API端点URL">
                            </div>

                            <!-- 模型选择 -->
                            <div>
                                <label for="ai-model" class="block text-sm font-medium text-gray-300 mb-2">AI模型</label>
                                <select id="ai-model" class="w-full px-4 py-3 rounded-xl glass-input text-white focus:outline-none">
                                    <option value="gpt-4">GPT-4</option>
                                    <option value="gpt-4-turbo" selected>GPT-4 Turbo</option>
                                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                    <option value="claude-3-opus">Claude 3 Opus</option>
                                    <option value="gemini-pro">Gemini Pro</option>
                                </select>
                            </div>

                            <!-- 测试连接 -->
                            <div class="flex items-center space-x-4">
                                <button id="test-connection" class="px-6 py-3 rounded-xl border border-tertiary text-tertiary hover:bg-tertiary hover:bg-opacity-20 transition-colors">
                                    <i class="fas fa-plug mr-2"></i>
                                    测试连接
                                </button>
                                <div id="connection-status" class="text-sm text-gray-400">
                                    <i class="fas fa-circle text-success mr-1"></i>
                                    连接正常
                                </div>
                            </div>

                            <!-- 保存按钮 -->
                            <div class="flex space-x-4 pt-6">
                                <button id="save-aiapi" class="px-6 py-3 rounded-xl glass-button text-white font-medium">
                                    <i class="fas fa-save mr-2"></i>
                                    保存配置
                                </button>
                                <button id="cancel-aiapi" class="px-6 py-3 rounded-xl border border-gray-600 text-gray-300 hover:bg-gray-600 hover:bg-opacity-20 transition-colors">
                                    取消
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 成功提示 -->
        <div id="success-message" class="fixed top-20 right-6 px-6 py-3 rounded-xl success-message transform translate-x-full transition-transform duration-300 z-50">
            <div class="flex items-center space-x-2">
                <i class="fas fa-check-circle"></i>
                <span>设置保存成功！</span>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 侧边栏菜单点击事件
            document.querySelector('#nav-home').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-HOME.html';
            });

            document.querySelector('#nav-subtitle').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-SUBTITLE_PROCESS.html';
            });

            document.querySelector('#nav-record').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-LEARNING_RECORD.html';
            });

            document.querySelector('#nav-notes').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = 'P-NOTE_MANAGE.html';
            });

            // 设置菜单切换
            const menuItems = document.querySelectorAll('.settings-menu-item');
            const contentItems = document.querySelectorAll('.settings-content');

            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    const menuId = this.id;
                    const contentId = menuId.replace('menu-', 'content-');

                    // 移除所有active类
                    menuItems.forEach(mi => {
                        mi.classList.remove('active');
                        mi.classList.add('text-gray-300');
                        mi.classList.remove('text-white');
                    });

                    contentItems.forEach(ci => {
                        ci.classList.remove('active');
                    });

                    // 添加active类到当前项
                    this.classList.add('active');
                    this.classList.remove('text-gray-300');
                    this.classList.add('text-white');

                    document.querySelector(`#${contentId}`).classList.add('active');
                });
            });

            // AI API配置页面跳转
            document.querySelector('#menu-aiapi').addEventListener('click', function() {
                window.location.href = 'P-AIAPI_CONFIG.html';
            });

            // 头像上传
            document.querySelector('.avatar-upload').addEventListener('click', function() {
                document.querySelector('#avatar-input').click();
            });

            document.querySelector('#avatar-input').addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.querySelector('#user-avatar-img').src = e.target.result;
                    };
                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // 开关切换
            const toggleSwitches = document.querySelectorAll('.toggle-switch');
            toggleSwitches.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            });

            // API密钥显示/隐藏
            document.querySelector('#toggle-api-key').addEventListener('click', function() {
                const apiKeyInput = document.querySelector('#api-key');
                const icon = this.querySelector('i');
                
                if (apiKeyInput.type === 'password') {
                    apiKeyInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    apiKeyInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });

            // 测试连接
            document.querySelector('#test-connection').addEventListener('click', function() {
                const status = document.querySelector('#connection-status');
                status.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i>正在测试连接...';
                
                setTimeout(() => {
                    status.innerHTML = '<i class="fas fa-circle text-success mr-1"></i>连接正常';
                }, 2000);
            });

            // 保存按钮事件
            const saveButtons = [
                'save-profile', 'save-security', 'save-notifications', 'save-goals', 'save-aiapi'
            ];

            saveButtons.forEach(buttonId => {
                document.querySelector(`#${buttonId}`)?.addEventListener('click', function() {
                    showSuccessMessage();
                });
            });

            // 取消按钮事件
            const cancelButtons = [
                'cancel-profile', 'cancel-security', 'cancel-notifications', 'cancel-goals', 'cancel-aiapi'
            ];

            cancelButtons.forEach(buttonId => {
                document.querySelector(`#${buttonId}`)?.addEventListener('click', function() {
                    // 重置表单或返回上一步
                    if (confirm('确定要取消更改吗？')) {
                        location.reload();
                    }
                });
            });

            // 显示成功消息
            function showSuccessMessage() {
                const message = document.querySelector('#success-message');
                message.style.transform = 'translateX(0)';
                
                setTimeout(() => {
                    message.style.transform = 'translateX(100%)';
                }, 3000);
            }

            // 添加页面加载动画
            const cards = document.querySelectorAll('.glass-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
    
    <!-- 侧边栏开关按钮 -->
    <button id="sidebar-toggle" class="fixed left-4 top-1/2 transform -translate-y-1/2 z-50 w-10 h-10 rounded-full glass-button flex items-center justify-center text-white shadow-lg">
        <i class="fas fa-bars"></i>
    </button>
</body>
</html>